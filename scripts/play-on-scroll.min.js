var throttle=function(t,i,e){var o,n,r,s=null,l=0;e||(e={});var h=function(){l=e.leading===!1?0:(new Date).getTime(),s=null,r=t.apply(o,n),s||(o=n=null)};return function(){var a=(new Date).getTime();l||e.leading!==!1||(l=a);var p=i-(a-l);return o=this,n=arguments,0>=p||p>i?(s&&(clearTimeout(s),s=null),l=a,r=t.apply(o,n),s||(o=n=null)):s||e.trailing===!1||(s=setTimeout(h,p)),r}};+function(t){"use strict";var i=t(window),e=function(i,e){this.$el=i,this.video=this.$el[0],this.ready=!1,this.options=t.extend(!0,{reverse:!1,scrollThrottle:100,seekWithScroll:!0},e),this.setupBindings()};e.prototype.initialize=function(){this.cacheHeights(),this.currentTime=this.options.reverse?this.video.duration:0,this.ratio=this.video.duration/(this.windowHeight-this.videoHeight),this.ready=!0},e.prototype.setupBindings=function(){if(this.$el.on("loadedmetadata",t.proxy(this.initialize,this)),this.options.seekWithScroll){var e=throttle(t.proxy(this.onWindowScroll,this),this.options.scrollThrottle);i.on("resize",t.proxy(this.cacheHeights,this)),i.on("scroll",e)}else{var e=throttle(t.proxy(this.playVideo,this),this.options.scrollThrottle);i.on("scroll",e)}i.on("blur",t.proxy(this.pauseVideo,this)),i.on("focus",t.proxy(this.playVideo,this))},e.prototype.playVideo=function(){this.canPlay()&&this.video.play()},e.prototype.pauseVideo=function(){this.video.pause()},e.prototype.render=function(){this.ready&&this.video.currentTime!=this.currentTime&&this.options.seekWithScroll&&(this.video.currentTime=this.currentTime)},e.prototype.cacheHeights=function(){this.windowHeight=parseInt(i.height()),this.videoHeight=parseInt(this.$el.height())},e.prototype.onWindowScroll=function(){this.playOrRewind()},e.prototype.playOrRewind=function(){if(this.canPlay()){var t=this.videoPosition*this.ratio;this.options.reverse||(t=this.video.duration-t),this.currentTime=t}},e.prototype.canPlay=function(){var t=this.$el.offset().top,e=i.scrollTop(),o=this.windowHeight,n=this.videoHeight,r=function(){return e+o>t+n},s=function(){return t>e};return this.setVideoPosition(t,e),s()&&r()},e.prototype.setVideoPosition=function(t,i){this.videoPosition=t-i},t.fn.playOnScroll=function(i){return this.each(function(){var o=t(this);window.playOnScrollElements.push(new e(o,i)),o.data("playOnScroll",window.playOnScrollElements[window.playOnScrollElements.length-1])}),this}}(jQuery),window.playOnScrollElements=[];var renderLoop=function(){requestAnimationFrame(function(){for(var t=0;t<window.playOnScrollElements.length;t++)window.playOnScrollElements[t].render();renderLoop()})};renderLoop();