var throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:(new Date).getTime(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=(new Date).getTime();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}};+function(a){"use strict";var b=a(window),c=function(a,b){this.$el=a,window.video=this.video=this.$el[0],this.setupBindings()};c.prototype.initialize=function(){this.cacheHeights(),this.currentTime=0,this.ratio=this.video.duration/this.windowHeight,this.render()},c.prototype.setupBindings=function(){var c=throttle(a.proxy(this.onWindowScroll,this),100);this.$el.on("loadedmetadata",a.proxy(this.initialize,this)),b.on("resize",a.proxy(this.cacheHeights,this)),b.on("scroll",c)},c.prototype.render=function(){this.video.currentTime=this.currentTime,requestAnimationFrame(a.proxy(this.render,this))},c.prototype.cacheHeights=function(){this.windowHeight=parseInt(b.height()),this.videoHeight=parseInt(this.$el.height())},c.prototype.onWindowScroll=function(){this.playOrRewind()},c.prototype.playOrRewind=function(){if(this.canPlay()){var a=this.videoPosition*this.ratio;this.currentTime=a}},c.prototype.canPlay=function(){var a=this.$el.offset().top,c=b.scrollTop(),d=this.windowHeight,e=this.videoHeight,f=function(){return c+d>a+e},g=function(){return a>c};return this.videoPosition=a-c,g()&&f()},a.fn.playOnScroll=function(b){return this.each(function(){var d=a(this);d.data("playOnScroll",new c(d,b))}),this}}(jQuery);